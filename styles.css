:root{
  --bg:#050505;
  --text:#f6f1d3;
  --muted:#cbbf8a;
  --gold:#d4af37;
  --gold2:#ffdd6e;
  --danger:#ff5a5f;
  --ok:#37d67a;

  --shadow:0 16px 34px rgba(0,0,0,0.55);
  --border:1px solid rgba(212,175,55,0.30);
}

*{box-sizing:border-box;}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:radial-gradient(900px 500px at 50% -10%, #1a1300, var(--bg));
  color:var(--text);
}

.app{
  max-width:1020px;
  margin:0 auto;
  padding:28px 18px 40px;
}

/* ===== Overlay (big logo only on win/loss) ===== */
.logo-overlay{
  position:fixed;
  inset:0;
  display:grid;
  place-items:center;
  background:rgba(0,0,0,0.72);
  opacity:0;
  pointer-events:none;
  transition:opacity 180ms ease;
  z-index:999;
}
.logo-overlay.show{ opacity:1; pointer-events:auto; }

.overlay-logo{
  width:min(92vw, 720px);
  max-height:45vh;
  height:auto;
  object-fit:contain;
  user-select:none;
  pointer-events:none;
  filter:
    drop-shadow(0 10px 0 rgba(0,0,0,0.75))
    drop-shadow(0 0 26px rgba(212,175,55,0.28));
}
.overlay-logo.win-flash{ animation: winFlash 520ms ease-out 1; }
.overlay-logo.lose-flicker{ animation: loseFlicker 650ms steps(6, end) 1; }

@keyframes winFlash{
  0%{ transform:translateY(0) scale(1); }
  30%{ transform:translateY(-2px) scale(1.03); filter:drop-shadow(0 10px 0 rgba(0,0,0,0.75)) drop-shadow(0 0 44px rgba(255,221,110,0.85)); }
  100%{ transform:translateY(0) scale(1); }
}
@keyframes loseFlicker{
  0%{ filter:drop-shadow(0 10px 0 rgba(0,0,0,0.75)) drop-shadow(0 0 16px rgba(212,175,55,0.18)); }
  20%{ filter:drop-shadow(0 10px 0 rgba(0,0,0,0.75)) drop-shadow(0 0 18px rgba(255,90,95,0.85)); }
  40%{ filter:drop-shadow(0 10px 0 rgba(0,0,0,0.75)) drop-shadow(0 0 8px rgba(255,90,95,0.35)); }
  60%{ filter:drop-shadow(0 10px 0 rgba(0,0,0,0.75)) drop-shadow(0 0 22px rgba(255,90,95,0.95)); }
  100%{ filter:drop-shadow(0 10px 0 rgba(0,0,0,0.75)) drop-shadow(0 0 18px rgba(212,175,55,0.28)); }
}

/* Desktop header */
.header-desktop .title-logo{
  display:block;
  max-width:min(820px, 100%);
  max-height:220px;
  width:auto;
  height:auto;
  object-fit:contain;
  margin:0 auto 8px;
  user-select:none;
  pointer-events:none;
  filter:
    drop-shadow(0 4px 0 rgba(0,0,0,0.75))
    drop-shadow(0 0 18px rgba(212,175,55,0.28));
  animation: glowBreath 4.8s ease-in-out infinite;
}
.sub{ margin:10px 0 0; color:var(--muted); text-align:center; }

@keyframes glowBreath{
  0%,100%{
    filter:drop-shadow(0 4px 0 rgba(0,0,0,0.75))
           drop-shadow(0 0 14px rgba(212,175,55,0.22));
    transform:translateY(0);
  }
  50%{
    filter:drop-shadow(0 4px 0 rgba(0,0,0,0.75))
           drop-shadow(0 0 26px rgba(255,221,110,0.42));
    transform:translateY(-1px);
  }
}

.board, .controls{
  background:rgba(12,12,12,0.92);
  border:var(--border);
  border-radius:18px;
  padding:18px;
  margin-top:16px;
  box-shadow:var(--shadow);
}

/* Desktop top bar */
.top-bar{
  display:grid;
  grid-template-columns:1fr auto;
  gap:16px;
  align-items:center;
  margin-bottom:10px;
}

/* Meter */
.meter{display:grid; gap:8px;}
.meter-label{
  display:flex;
  justify-content:space-between;
  color:var(--muted);
  font-size:13px;
}
.meter-track{
  position:relative;
  height:16px;
  border-radius:999px;
  background:rgba(255,221,110,0.08);
  border:1px solid rgba(212,175,55,0.25);
  overflow:hidden;
}
.meter-fill{
  height:100%;
  width:100%;
  background:linear-gradient(90deg, var(--gold), var(--gold2));
  border-radius:999px;
  transition:width 220ms ease;
}
.meter-gloss{
  position:absolute;
  inset:0;
  background:linear-gradient(180deg, rgba(255,255,255,0.22), rgba(255,255,255,0));
  opacity:0.25;
  pointer-events:none;
}
.meter-track.low .meter-fill{
  background:linear-gradient(90deg, var(--danger), var(--gold2));
}

/* Vinyl */
.vinyl-wrap{ position:relative; width:96px; height:64px; }
.vinyl{
  position:absolute; right:0; top:0;
  width:64px; height:64px; border-radius:50%;
  background:
    radial-gradient(circle at 50% 50%, rgba(0,0,0,0.1) 0 14px, transparent 14px),
    repeating-radial-gradient(circle at 50% 50%, rgba(255,221,110,0.08) 0 2px, rgba(0,0,0,0) 2px 6px),
    radial-gradient(circle at 50% 50%, #121212, #030303);
  border:1px solid rgba(212,175,55,0.25);
  box-shadow:0 10px 22px rgba(0,0,0,0.5);
  display:grid; place-items:center;
}
.vinyl-label{
  width:22px; height:22px; border-radius:50%;
  background:radial-gradient(circle at 35% 35%, var(--gold2), var(--gold));
}
.vinyl-hole{
  position:absolute;
  width:6px; height:6px; border-radius:50%;
  background:#0a0a0a;
  border:1px solid rgba(255,255,255,0.12);
}
.needle{
  position:absolute;
  right:48px; top:6px;
  width:44px; height:6px; border-radius:999px;
  background:rgba(255,255,255,0.12);
  border:1px solid rgba(255,255,255,0.10);
  transform-origin:right center;
  transform:rotate(-18deg);
}

/* Name board */
.name-board{
  display:flex;
  flex-direction:column;
  gap:10px;
  align-items:center;
  user-select:none;
  padding:10px 0 14px;
}
.name-row{
  display:flex;
  gap:8px;
  flex-wrap:nowrap;
  justify-content:center;
}
.name-row.compact{ gap:6px; }
.name-row.ultra-compact{ gap:4px; }
.name-row.compact .tile{ width:34px; height:48px; font-size:20px; }
.name-row.ultra-compact .tile{ width:30px; height:44px; font-size:18px; }

.tile{
  width:40px;
  height:52px;
  border-radius:12px;
  background:rgba(255,221,110,0.06);
  border:1px solid rgba(212,175,55,0.20);
  display:grid;
  place-items:center;
  font-size:22px;
  font-weight:800;
  text-transform:uppercase;
}
.tile.blank::after{
  content:"";
  width:18px;
  height:2px;
  background:rgba(255,221,110,0.65);
  border-radius:2px;
  position:relative;
  top:14px;
}
.tile.hyphen{
  width:22px;
  background:transparent;
  border:none;
  font-weight:900;
  color:var(--gold2);
}

@keyframes revealPop{
  0%{ transform:scale(1); filter:none; }
  45%{ transform:scale(1.12); filter:drop-shadow(0 0 10px rgba(255,221,110,0.55)); }
  100%{ transform:scale(1); filter:none; }
}
.tile.revealed-anim{ animation:revealPop 220ms ease-out 1; }

.name-row.shine{ position:relative; overflow:hidden; }
.name-row.shine::after{
  content:"";
  position:absolute;
  top:0; left:-40%;
  width:40%; height:100%;
  background:linear-gradient(90deg, rgba(255,221,110,0), rgba(255,221,110,0.18), rgba(255,221,110,0));
  transform:skewX(-20deg);
  animation:rowShine 420ms ease-out 1;
  pointer-events:none;
}
@keyframes rowShine{ from{ left:-40%; } to{ left:120%; } }

.status{
  display:flex;
  justify-content:space-between;
  gap:12px;
  color:var(--muted);
  font-size:14px;
  flex-wrap:wrap;
  border-top:1px solid rgba(212,175,55,0.18);
  padding-top:12px;
  margin-top:8px;
}
.message{
  margin-top:10px;
  min-height:22px;
  color:var(--muted);
  text-align:center;
}
.message.ok{ color:var(--ok); }
.message.bad{ color:var(--danger); }

/* Keyboard */
.keyboard-wrap{ display:grid; gap:10px; }
.kbd-title{ color:var(--muted); font-size:14px; text-align:center; }

/* IMPORTANT: tighter keyboard that uses the whole width */
.keyboard{
  display:grid;
  gap:10px;
}
.keyboard-row{
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap:nowrap;
}
.key{
  min-width:44px;
  height:44px;
  padding:0 12px;
  border-radius:12px;
  border:1px solid rgba(212,175,55,0.55);
  background:linear-gradient(180deg, rgba(212,175,55,0.22), rgba(212,175,55,0.12));
  color:var(--text);
  font-weight:900;
  letter-spacing:0.5px;
  cursor:pointer;
  user-select:none;
}
.key:disabled{ opacity:0.35; cursor:not-allowed; }
.key.hit{ border-color:rgba(55,214,122,0.8); box-shadow:0 0 0 3px rgba(55,214,122,0.12); }
.key.miss{ border-color:rgba(255,90,95,0.85); box-shadow:0 0 0 3px rgba(255,90,95,0.10); }

.actions{
  margin-top:14px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:center;
}
button{
  height:46px;
  padding:0 14px;
  border-radius:12px;
  border:1px solid rgba(212,175,55,0.55);
  background:linear-gradient(180deg, rgba(212,175,55,0.22), rgba(212,175,55,0.12));
  color:var(--text);
  font-weight:800;
  cursor:pointer;
}
.secondary{
  border-color:rgba(255,255,255,0.18);
  background:rgba(255,255,255,0.06);
}

.footer{ margin-top:18px; color:rgba(246,241,211,0.55); text-align:center; }

/* Record scratch */
@keyframes scratchShake{
  0%{ transform:translate(0,0) rotate(0deg); }
  15%{ transform:translate(-2px,1px) rotate(-0.5deg); }
  30%{ transform:translate(3px,-2px) rotate(0.6deg); }
  45%{ transform:translate(-3px,-1px) rotate(-0.6deg); }
  60%{ transform:translate(3px,2px) rotate(0.5deg); }
  75%{ transform:translate(-2px,1px) rotate(-0.4deg); }
  100%{ transform:translate(0,0) rotate(0deg); }
}
@keyframes vinylSpinBack{
  0%{ transform:rotate(0deg); }
  35%{ transform:rotate(190deg); }
  60%{ transform:rotate(120deg); }
  100%{ transform:rotate(160deg); }
}
@keyframes needleJolt{
  0%{ transform:rotate(-18deg); }
  35%{ transform:rotate(-6deg); }
  65%{ transform:rotate(-26deg); }
  100%{ transform:rotate(-18deg); }
}
.scratch{ animation:scratchShake 240ms ease-in-out; }
.scratch .vinyl{ animation:vinylSpinBack 260ms ease-in-out; }
.scratch .needle{ animation:needleJolt 260ms ease-in-out; }

/* ===== Layout C Responsive Mode ===== */
.header-mobile{ display:none; }
.controls-sticky{ position:static; }
.footer-desktop{ display:block; }

@media (max-width: 900px), (max-height: 520px) {
  .app{
    padding:12px 12px calc(240px + env(safe-area-inset-bottom)) 12px;
  }

  .header-desktop{ display:none; }
  .top-bar-desktop{ display:none; }
  .footer-desktop{ display:none; }

  .header-mobile{
    display:block;
    margin-top:6px;
    margin-bottom:10px;
  }

  /* Mobile logo at top (compact) */
  .mobile-logo{
    display:block;
    width:min(66vw, 272px);
    height:auto;
    margin:0 auto 10px;
    object-fit:contain;
    user-select:none;
    pointer-events:none;
    filter:
      drop-shadow(0 4px 0 rgba(0,0,0,0.75))
      drop-shadow(0 0 16px rgba(212,175,55,0.22));
    animation: glowBreath 4.8s ease-in-out infinite;
  }

  /* Meter + vinyl row */
  .mobile-topbar{
    display:grid;
    grid-template-columns: 1fr auto;
    gap:12px;
    align-items:center;
  }

  .mobile-meter-top{
    display:flex;
    justify-content:space-between;
    align-items:baseline;
    color:var(--muted);
    font-size:13px;
    margin-bottom:6px;
  }
  .meter-track-mobile{ height:14px; }

  .vinyl-wrap-mobile{
    width:74px;
    height:54px;
  }
  .vinyl-wrap-mobile .vinyl{
    width:54px;
    height:54px;
  }
  .vinyl-wrap-mobile .needle{
    right:40px;
    top:6px;
    width:38px;
    height:6px;
  }

  .board{
    margin-top:10px;
    padding:14px;
    border-radius:16px;
  }

  /* Tiles slightly smaller */
  .tile{ width:34px; height:48px; font-size:20px; }
  .tile.blank::after{ top:12px; width:16px; }

  /* Sticky dock */
  .controls-sticky{
    position:fixed;
    left:0; right:0;
    bottom:0;
    z-index:50;
    margin:0;
    border-radius:18px 18px 0 0;
    border-left:none;
    border-right:none;
    border-bottom:none;
    padding:12px 12px calc(12px + env(safe-area-inset-bottom)) 12px;
    background:rgba(10,10,10,0.94);
    backdrop-filter: blur(8px);
  }

  /* âœ… Mobile keyboard: full-width, no lonely letters */
  .keyboard{ gap:8px; }
  .keyboard-row{
    gap:8px;
    justify-content:space-between;
  }
  .key{
    min-width:0;
    width:100%;
    flex:1 1 0;
    height:40px;
    padding:0;
    border-radius:10px;
    font-size:14px;
  }

  /* Give rows with fewer keys a little inset like real QWERTY */
  .keyboard-row.offset-1{ padding:0 6px; }
  .keyboard-row.offset-2{ padding:0 18px; }

  .actions{
    margin-top:10px;
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:10px;
  }
  button{ height:44px; }
  .kbd-title{ font-size:13px; }
}

@media (max-height: 430px) {
  .kbd-title{ display:none; }
  .app{ padding-bottom: calc(210px + env(safe-area-inset-bottom)); }
}
